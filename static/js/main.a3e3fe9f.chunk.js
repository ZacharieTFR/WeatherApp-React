(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(141)},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=a(23),l=a(19),s=a(34),u=a(40),m=a(43),d=a(100),f=a(193),p=a(96),g=a.n(p),h=a(69),E=a.n(h),y=a(70),b=a.n(y),v=a(95),C=a.n(v),_=a(201),w=a(207),O=a(208),k=a(202),j=a(200),S=a(206),F=a(145),T=a(21),N=a(89),W=a.n(N),A=a(74),R=a(98),x=a(90),I=a.n(x);A.a.use(R.a).use(I.a).use(T.a).init({fallbackLng:["en"],debug:!1,whitelist:["en","fr"],interpolation:{escapeValue:!1},backend:{loadPath:"/WeatherApp-React/locales/{{lng}}/translation.json"}});var L=A.a,D=a(27),U="42b79f35a88041eeaf3144331fc8529b",H="https://api.weatherbit.io/v2.0/",B=function(e){return{type:"ADD_CITY",payload:{city:e}}},G=function(){return{type:"FETCH_WEATHER_BEGIN"}},P=function(){return{type:"FETCH_FORECAST_BEGIN"}},Y=function(e,t){return{type:"FETCH_CITY_WEATHER_SUCCESS",payload:{weather:e,cityName:t}}},z=function(e,t){return{type:"FETCH_CITY_FORECAST_SUCCESS",payload:{city:e,forecast:t}}},J=function(e){return{type:"FETCH_FAILURE",payload:{error:e}}};function M(e){return function(t,a){a().cities.find(function(t){return t.city_name.toUpperCase()===e.toUpperCase()})||(t(B(e)),t(V(e)))}}function V(e){return function(t){t(G()),fetch(H+"current/?lang="+L.language+"&city="+e+"&key="+U).then(X).then(function(e){return e.json()}).then(function(a){var n=a.data[0];return t(Y(n,e)),t(function(e,t){return function(a){a(P),fetch(H+"forecast/daily?lang="+L.language+"&city="+e+"&country="+t+"&key="+U).then(X).then(function(e){return e.json()}).then(function(t){return a(z(e,t.data)),t.data}).catch(function(e){return a(J(e.message))})}}(n.city_name,n.country_code)),n}).catch(function(e){return t(J(e.message))})}}function X(e){if(!e.ok)throw console.log("fail"),Error(e.statusText);return e}var $=a(33),q=a(191),Z=a(189),K=a(188),Q=a(203),ee=a(205),te=a(192),ae=a(93),ne=a.n(ae),re=a(187),ie=a(183),ce=Object(ie.a)({root:{backgroundColor:"#D32F2F",display:"flex",alignItems:"center"},message:{paddingLeft:"12px",display:"flex",alignItems:"center"}});var oe=Object(D.b)(function(e){return{cities:e.cities}},function(e){return{addCity:function(t){e(M(t))}}})(function(e){var t=Object(T.b)().t,a=ce(),n=r.a.useState(!1),i=Object($.a)(n,2),c=i[0],o=i[1],l=r.a.useState(!1),s=Object($.a)(l,2),u=s[0],m=s[1];function d(){o(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{title:t("add_city"),"aria-label":t("add_city")},r.a.createElement(re.a,{color:"secondary",onClick:function(){o(!0)}},r.a.createElement(ne.a,null))),r.a.createElement(ee.a,{open:c,onClose:d,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},t("add_city")),r.a.createElement("form",{id:"addCityForm",onSubmit:function(t){t.preventDefault();var a=t.target.cityName.value;e.cities.find(function(e){return e.city_name.toUpperCase()===a.toUpperCase()})?m(!0):(e.addCity(a),o(!1))}},r.a.createElement(Z.a,null,r.a.createElement(Q.a,{autoFocus:!0,required:!0,margin:"dense",id:"cityName",inputProps:{pattern:"^([A-z\xc0-\xd6\xd8-\xf6\xf8-\xff-])*$"},label:t("city_name"),type:"text",fullWidth:!0})),r.a.createElement(q.a,null,r.a.createElement(te.a,{type:"submit",color:"primary"},t("add")),r.a.createElement(te.a,{onClick:d,color:"primary"},t("cancel")))),r.a.createElement(S.a,{open:u,ContentProps:{classes:{root:a.root,message:a.message}},message:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null),r.a.createElement("span",{className:a.message},t("alreadyExist")),r.a.createElement(f.a,{key:"close","aria-label":"Close",color:"inherit",onClick:function(){m(!1)}},r.a.createElement(b.a,{size:"small"})))})))}),le=a(198),se=a(197),ue=a(199),me=a(194),de=a(94),fe=a.n(de),pe=Object(ie.a)({deleteBtn:{float:"right"}});var ge=Object(D.b)(function(e){return{cities:e.cities}},function(e){return{deleteCity:function(t){e(function(e){return{type:"DELETE_CITY",payload:{city:e}}}(t))}}})(function(e){var t=Object(T.b)().t,a=pe(),n=r.a.useState(!1),i=Object($.a)(n,2),c=i[0],o=i[1];function l(){o(!1)}return r.a.createElement("div",null,r.a.createElement(O.a,{title:t("delete_city"),"aria-label":t("delete_city")},r.a.createElement(f.a,{"aria-label":t("delete"),className:a.deleteBtn,onClick:function(){o(!0)}},r.a.createElement(fe.a,{fontSize:"small"}))),r.a.createElement("div",null,r.a.createElement(ee.a,{open:c,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(K.a,{id:"alert-dialog-title",style:{textTransform:"capitalize"}},t("delete")," ",e.city," ?"),r.a.createElement(Z.a,null,r.a.createElement(me.a,{id:"alert-dialog-description"},t("confirm_delete"))),r.a.createElement(q.a,null,r.a.createElement(te.a,{onClick:function(t){e.deleteCity(e.city),o(!1)},color:"primary"},t("delete")),r.a.createElement(te.a,{onClick:l,color:"primary",autoFocus:!0},t("cancel"))))))}),he=a(196),Ee=a(195),ye="https://www.weatherbit.io/static/img/icons/",be=Object(ie.a)({root:{marginTop:"1.5em",display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},progress:{marginLeft:"50%"},img:{height:64,width:64,display:"block"},typoBlock:{display:"block"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)",width:"100%"},forecastDayDisplay:{minWidth:"75px",height:"120px !important"},lightGrey:{color:"#8c8c8c"}});var ve=Object(D.b)(function(e){return{loadingForecast:e.loadingForecast}})(function(e){var t=Object(T.b)().t,a=be();if(!e.city.forecast)return r.a.createElement(Ee.a,{className:a.progress});var n=t("day_names",{returnObjects:!0});return r.a.createElement("div",{className:a.root},r.a.createElement(he.a,{className:a.gridList,cols:2.5},e.city.forecast.map(function(e,t){return r.a.createElement("center",{className:a.forecastDayDisplay,key:t},r.a.createElement(d.a,{className:a.typoBlock,variant:"body1"},n[new Date(1e3*e.ts).getDay()]),r.a.createElement("img",{className:a.img,src:ye+e.weather.icon+".png",height:"64",width:"64",alt:"weather icon"}),r.a.createElement(d.a,{className:"".concat(a.typoBlock," ").concat(a.lightGrey),variant:"caption"},e.app_max_temp,"\xb0 ",e.app_min_temp,"\xb0"))})))}),Ce=Object(ie.a)({card:{margin:"12px 0"},lightGrey:{color:"#8c8c8c"},deleteBtn:{float:"right"}}),_e="https://www.weatherbit.io/static/img/icons/";function we(e){var t=Object(T.b)().t,a=Ce();if(!e||!e.city.weather)return null;var n=e.city,i=new Date(n.last_ob_time),c=i.toLocaleDateString(),o=i.toLocaleTimeString(),l=n.wind_spd,s=n.wind_cdir_full,u=_e+n.weather.icon+".png";return r.a.createElement(se.a,{className:a.card},r.a.createElement(le.a,null,r.a.createElement(ue.a,{container:!0,spacing:3},r.a.createElement(ue.a,{item:!0,xs:12},r.a.createElement(ge,{city:n.city_name}),r.a.createElement(d.a,{variant:"h5"},n.city_name,", ",n.country_code),r.a.createElement(d.a,{className:a.lightGrey,variant:"subtitle2"},c,", ",o)),r.a.createElement(ue.a,{item:!0,xs:7},r.a.createElement("img",{align:"left",src:u,alt:"weather icon"}),r.a.createElement(d.a,{variant:"h2"},n.temp,"\xb0"),r.a.createElement(d.a,{variant:"subtitle1"},n.weather.description)),r.a.createElement(ue.a,{item:!0,xs:5},r.a.createElement(d.a,{variant:"subtitle1"},r.a.createElement("span",{className:a.lightGrey},t("sunrise"),": "),n.sunrise),r.a.createElement(d.a,{variant:"subtitle1"},r.a.createElement("span",{className:a.lightGrey},t("sunset"),": "),n.sunset),r.a.createElement(d.a,{variant:"subtitle1"},r.a.createElement("span",{className:a.lightGrey},t("wind"),": "),l," m/s, ",s),r.a.createElement(d.a,{variant:"subtitle1"},r.a.createElement("span",{className:a.lightGrey},t("humidity"),": "),n.rh," %"))),r.a.createElement(ve,{city:e.city})))}var Oe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getUserCoordsAndWeather",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.props.fetchCityAndWeatherFromCoords(t.coords)},function(e){console.warn(e.message)})}},{key:"componentDidMount",value:function(){this.getUserCoordsAndWeather(),this.props.getCitiesWeathers()}},{key:"handleRefresh",value:function(){this.props.getCitiesWeathers()}},{key:"handleChangeLang",value:function(e){var t=e.target.value;L.changeLanguage(t)}},{key:"handleCloseSnackError",value:function(){this.props.clearError()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading")},r.a.createElement(j.a,{position:"fixed",className:"header"},r.a.createElement(_.a,null,r.a.createElement(d.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Weather App"),r.a.createElement(k.a,{onChange:function(t){e.handleChangeLang(t)},IconComponent:C.a,value:L.language},r.a.createElement(w.a,{value:"fr"},"Fran\xe7ais"),r.a.createElement(w.a,{value:"en"},"English")),r.a.createElement(O.a,{title:t("refresh"),"aria-label":t("refresh")},r.a.createElement(f.a,{"aria-label":t("refresh"),onClick:function(){e.handleRefresh()}},r.a.createElement(g.a,{fontSize:"small"}))),r.a.createElement(oe,null))),r.a.createElement("div",{style:{marginTop:"4.5em"}},this.props.cities.map(function(e,t){return r.a.createElement(we,{key:t,city:e})})),r.a.createElement(S.a,{open:Boolean(this.props.error),ContentProps:{classes:{root:a.root,message:a.message}},message:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null),r.a.createElement("span",{className:a.message},t(this.props.error)),r.a.createElement(f.a,{key:"close","aria-label":"Close",color:"inherit",onClick:function(){e.handleCloseSnackError()}},r.a.createElement(b.a,{size:"small"})))})))}}]),t}(r.a.Component),ke=W()(Object(T.c)(),Object(F.a)({root:{backgroundColor:"#D32F2F",display:"flex",alignItems:"center"},message:{paddingLeft:"12px",display:"flex",alignItems:"center"}}),Object(D.b)(function(e){return{cities:e.cities,loadingWeather:e.loadingWeather,loadingForecast:e.loadingForecast,error:e.error}},function(e){return{getCitiesWeathers:function(){e(function(e,t){t().cities.forEach(function(t){e(V(t.city_name))})})},fetchCityAndWeatherFromCoords:function(t){e(function(e){return function(t){t(G()),fetch(H+"current/?lat="+e.latitude+"&lon="+e.longitude+"&key="+U).then(X).then(function(e){return e.json()}).then(function(e){var a=e.data[0];return t(M(a.city_name)),a}).catch(function(e){return t(J(e.message))})}}(t))},clearError:function(){e({type:"CLEAR_ERROR"})}}}))(Oe);var je=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading")},r.a.createElement(ke,null)))},Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(140);var Te=a(47),Ne=a(46),We=a(11),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY":return Object(We.a)({},e,{cities:[].concat(Object(Ne.a)(e.cities),[{city_name:t.payload.city}])});case"DELETE_CITY":return Object(We.a)({},e,{cities:e.cities.filter(function(e){return e.city_name!==t.payload.city})});case"FETCH_WEATHER_BEGIN":return Object(We.a)({},e,{loadingWeather:!0,error:null});case"FETCH_FORECAST_BEGIN":return Object(We.a)({},e,{loadingForecast:!0,error:null});case"FETCH_CITY_WEATHER_SUCCESS":return Object(We.a)({},e,{loadingWeather:!1,cities:e.cities.map(function(e,a){return e.city_name===t.payload.weather.city_name||e.city_name===t.payload.cityName?t.payload.weather:e})});case"FETCH_CITY_FORECAST_SUCCESS":return Object(We.a)({},e,{loadingForecast:!1,cities:e.cities.map(function(e,a){return e.city_name!==t.payload.city?e:Object(We.a)({},e,{forecast:t.payload.forecast.slice(1,8)})})});case"FETCH_FAILURE":return Object(We.a)({},e,{loadingWeather:!1,loadingForecast:!1,error:t.payload.error});case"CLEAR_ERROR":return Object(We.a)({},e,{error:null});default:return e}},Re=a(97),xe=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}},Ie=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),Le={cities:Ie?Ie.cities:[]},De=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Te.c;var Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=Object(Te.d)(Ae,e,De(Object(Te.a)(Re.a)));return t.subscribe(function(){xe({cities:t.getState().cities})}),t}();c.a.render(r.a.createElement(D.a,{store:Ue},r.a.createElement(je,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/WeatherApp-React",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/WeatherApp-React","/service-worker.js");Se?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Fe(t,e)})}}()}},[[110,1,2]]]);
//# sourceMappingURL=main.a3e3fe9f.chunk.js.map