(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),c=a.n(r),o=a(41),l=a(19),s=a(13),u=a(24),d=a(26),h=a(27),m=a(87),f=a(178),p=a(84),y=a.n(p),g=a(83),v=a.n(g),E=a(185),b=a(21),w=a(191),C=a(190),k=a(186),S=a(184),j=a(37),O=a(175),_=a(173),N=a(172),W=a(187),x=a(189),D=a(176),A=a(80),L=a.n(A),T=a(171);function G(e){var t=Object(b.b)().t,a=i.a.useState(!1),n=Object(j.a)(a,2),r=n[0],c=n[1];function o(){c(!1)}return i.a.createElement("div",null,i.a.createElement(C.a,{title:t("add_city"),"aria-label":t("add_city")},i.a.createElement(T.a,{color:"secondary",onClick:function(){c(!0)}},i.a.createElement(L.a,null))),i.a.createElement(x.a,{open:r,onClose:o,"aria-labelledby":"form-dialog-title"},i.a.createElement(N.a,{id:"form-dialog-title"},t("add_city")),i.a.createElement("form",{id:"addCityForm",onSubmit:function(t){var a=t.target.cityName.value;e.onCityAdd(a),t.preventDefault(),c(!1)}},i.a.createElement(_.a,null,i.a.createElement(W.a,{autoFocus:!0,required:!0,margin:"dense",id:"cityName",label:t("city_name"),type:"text",fullWidth:!0})),i.a.createElement(O.a,null,i.a.createElement(D.a,{type:"submit",color:"primary"},t("add")),i.a.createElement(D.a,{onClick:o,color:"primary"},t("cancel"))))))}var B=a(182),R=a(177),F=a(179),P=a(81),U=a.n(P),I=Object(R.a)({deleteBtn:{float:"right"}});function J(e){var t=Object(b.b)().t,a=I(),n=i.a.useState(!1),r=Object(j.a)(n,2),c=r[0],o=r[1];function l(){o(!1)}return i.a.createElement("div",null,i.a.createElement(C.a,{title:t("delete_city"),"aria-label":t("delete_city")},i.a.createElement(f.a,{"aria-label":t("delete"),className:a.deleteBtn,onClick:function(){o(!0)}},i.a.createElement(U.a,{fontSize:"small"}))),i.a.createElement("div",null,i.a.createElement(x.a,{open:c,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(N.a,{id:"alert-dialog-title",style:{textTransform:"capitalize"}},t("delete")," ",e.city," ?"),i.a.createElement(_.a,null,i.a.createElement(F.a,{id:"alert-dialog-description"},t("confirm_delete"))),i.a.createElement(O.a,null,i.a.createElement(D.a,{onClick:function(t){e.onCityDelete(e.city),o(!1)},color:"primary"},t("delete")),i.a.createElement(D.a,{onClick:l,color:"primary",autoFocus:!0},t("cancel"))))))}var z=a(181),M=a(183),q=a(132),V=a(67),Z=a(85),$=a(82),H=a.n($);V.a.use(Z.a).use(H.a).use(b.a).init({fallbackLng:["en"],debug:!1,whitelist:["en","fr"],interpolation:{escapeValue:!1},backend:{loadPath:"../locales/{{lng}}/translation.json"}});var K=V.a,Q=a(180),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={forecast:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"fetchForecast",value:function(){var e=this;fetch("https://api.weatherbit.io/v2.0/forecast/daily?lang="+K.language+"&city="+this.props.city+"&country="+this.props.country+"&key=42b79f35a88041eeaf3144331fc8529b").then(function(e){return e.json()}).then(function(t){e.setState({forecast:t.data.slice(1,7)})},function(t){e.setState({error:t})})}},{key:"componentDidMount",value:function(){this.fetchForecast(this.props.city)}},{key:"render",value:function(){var e=this.props.t,t=this.props.classes,a=e("day_names",{returnObjects:!0});return i.a.createElement("div",{className:t.root},i.a.createElement(Q.a,{className:t.gridList,cols:2.5},this.state.forecast.map(function(e,n){return i.a.createElement("center",{className:t.forecastDayDisplay,key:n},i.a.createElement(m.a,{className:t.typoBlock,variant:"body1"},a[new Date(1e3*e.ts).getDay()]),i.a.createElement("img",{className:t.img,src:"https://www.weatherbit.io/static/img/icons/"+e.weather.icon+".png",height:"64",width:"64",alt:"weather icon"}),i.a.createElement(m.a,{className:"".concat(t.typoBlock," ").concat(t.lightGrey),variant:"caption"},e.app_max_temp,"\xb0 ",e.app_min_temp,"\xb0"))})))}}]),t}(i.a.Component),Y=Object(q.a)(function(e){return{root:{marginTop:"1.5em",display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},img:{height:64,width:64,display:"block"},typoBlock:{display:"block"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)",width:"100%"},forecastDayDisplay:{minWidth:"75px",height:"120px !important"},lightGrey:{color:"#8c8c8c"}}})(Object(b.c)()(X)),ee=Object(R.a)({card:{margin:"12px 0"},lightGrey:{color:"#8c8c8c"},deleteBtn:{float:"right"}}),te="https://www.weatherbit.io/static/img/icons/";function ae(e){var t=Object(b.b)().t,a=ee();if(e){var n=e.data[0],r=n.city_name,c=n.country_code,o=new Date(n.last_ob_time),l=o.toLocaleDateString(),s=o.toLocaleTimeString(),u=n.wind_spd,d=n.wind_cdir_full,h=te+n.weather.icon+".png";return i.a.createElement(z.a,{className:a.card},i.a.createElement(B.a,null,i.a.createElement(M.a,{container:!0,spacing:3},i.a.createElement(M.a,{item:!0,xs:12},i.a.createElement(J,{onCityDelete:function(){return t=r,void e.onCityDelete(t);var t},city:n.city_name}),i.a.createElement(m.a,{variant:"h5"},n.city_name,", ",n.country_code),i.a.createElement(m.a,{className:a.lightGrey,variant:"subtitle2"},l,", ",s)),i.a.createElement(M.a,{item:!0,xs:7},i.a.createElement("img",{align:"left",src:h,alt:"weather icon"}),i.a.createElement(m.a,{variant:"h2"},n.temp,"\xb0"),i.a.createElement(m.a,{variant:"subtitle1"},n.weather.description)),i.a.createElement(M.a,{item:!0,xs:5},i.a.createElement(m.a,{variant:"subtitle1"},i.a.createElement("span",{className:a.lightGrey},t("sunrise"),": "),n.sunrise),i.a.createElement(m.a,{variant:"subtitle1"},i.a.createElement("span",{className:a.lightGrey},t("sunset"),": "),n.sunset),i.a.createElement(m.a,{variant:"subtitle1"},i.a.createElement("span",{className:a.lightGrey},t("wind"),": "),u," m/s, ",d),i.a.createElement(m.a,{variant:"subtitle1"},i.a.createElement("span",{className:a.lightGrey},t("humidity"),": "),n.rh," %"))),i.a.createElement(Y,{city:r,country:c})))}}var ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={error:null,weathers:[],cities:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getCitiesSaved",value:function(){if("undefined"!=typeof Storage){var e=JSON.parse(localStorage.getItem("cities"));e&&this.setState({cities:e})}}},{key:"saveCitiesToLocalStorage",value:function(e){"undefined"!==typeof Storage&&localStorage.setItem("cities",JSON.stringify(e))}},{key:"getUserCoords",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.fetchCoordsWeather(t.coords)},function(t){console.warn(t.message),e.handleCityAdd("Paris")}):this.handleCityAdd("Paris")}},{key:"fetchCoordsWeather",value:function(e){var t=this;fetch("https://api.weatherbit.io/v2.0/current/?lat="+e.latitude+"&lon="+e.longitude+"&key=42b79f35a88041eeaf3144331fc8529b").then(function(e){return e.json()}).then(function(e){t.handleCityAdd(e.data[0].city_name)},function(e){t.setState({error:e})})}},{key:"replaceCityTrad",value:function(e,t){if(e!==t){var a=Object(o.a)(this.state.cities),n=a.indexOf(e);a[n]=t,this.setState({cities:a})}}},{key:"fetchCitiesWeathers",value:function(e){var t=this,a=[];e.forEach(function(e){fetch("https://api.weatherbit.io/v2.0/current/?lang="+K.language+"&city="+e+"&key=42b79f35a88041eeaf3144331fc8529b").then(function(e){return e.json()}).then(function(n){t.replaceCityTrad(e,n.data[0].city_name),a.push(n.data),t.setState({weathers:a})},function(e){t.setState({error:e})})})}},{key:"componentDidMount",value:function(){this.getCitiesSaved(),this.getUserCoords()}},{key:"handleCityAdd",value:function(e){var t=this.state.cities;t.find(function(t){return t===e})||(t.push(e),this.saveCitiesToLocalStorage(t),this.setState({cities:t})),this.fetchCitiesWeathers(t)}},{key:"handleCityDelete",value:function(e){var t=this.state.cities.filter(function(t){return t!==e}),a=this.state.weathers.filter(function(t){return t[0].city_name!==e});this.saveCitiesToLocalStorage(t),this.setState({cities:t,weathers:a})}},{key:"handleRefresh",value:function(){this.fetchCitiesWeathers(this.state.cities)}},{key:"handleChangeLang",value:function(e){var t=e.target.value;K.changeLanguage(t)}},{key:"render",value:function(){var e=this,t=this.props.t;return i.a.createElement("div",{className:"container"},i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"Loading")},i.a.createElement(S.a,{position:"fixed",className:"header"},i.a.createElement(E.a,null,i.a.createElement(m.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Weather App"),i.a.createElement(k.a,{onChange:function(t){e.handleChangeLang(t)},IconComponent:v.a,value:K.language},i.a.createElement(w.a,{value:"fr"},"Fran\xe7ais"),i.a.createElement(w.a,{value:"en"},"English")),i.a.createElement(C.a,{title:t("refresh"),"aria-label":t("refresh")},i.a.createElement(f.a,{"aria-label":t("refresh"),onClick:function(){e.handleRefresh()}},i.a.createElement(y.a,{fontSize:"small"}))),i.a.createElement(G,{onCityAdd:function(t){return e.handleCityAdd(t)}}))),i.a.createElement("div",{style:{marginTop:"4.5em"}},this.state.weathers.map(function(t,a){return i.a.createElement(ae,{key:a,data:t,onCityDelete:function(t){return e.handleCityDelete(t)}})}))))}}]),t}(i.a.Component),ie=Object(b.c)()(ne);var re=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"Loading")},i.a.createElement(ie,null)))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(128);c.a.render(i.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/WeatherApp-React",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/WeatherApp-React","/service-worker.js");ce?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):oe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):oe(t,e)})}}()},98:function(e,t,a){e.exports=a(129)}},[[98,1,2]]]);
//# sourceMappingURL=main.032125b5.chunk.js.map